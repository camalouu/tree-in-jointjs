<!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.4.1/backbone-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.min.js"
        integrity="sha512-0kHmK8RUwEQNkd8fI7LyJP/8ZkHr1s9R/Xh2GC4fTluS7NpGuu5ed/jYvkkKzGyjVleZwKI35YvSoQL+wZ2v4g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.core.min.js"
        integrity="sha512-zCg4YtkvJ44FAVrP1M2BLN/uT7XdhdnJ+cpCmuu6RbPyCiBuLkbLkqnPcKHRsoRdCwmoP2bSm9RF2jLcke/0ZA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/geometry.min.js"
        integrity="sha512-rZ0lnakbkL/Zk0E23SDfdtQsIaG+Sma+26u0/dBp6/F2ILJ0Yzgzw924YHycyusfkZHCqDC9jXPA8eNlgk+CaA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.layout.DirectedGraph.min.js"
        integrity="sha512-qkMiS5zUMC36MY8m/JpZAXL8z6NytZ/pdazGYd1z68wnxe7temEMKPYj8/8v9xoijCDgNFXUduICmBa+Eky/Pg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.nowrap.min.js"
        integrity="sha512-VgqhEum2+MFJj/KnSOo948fGVCP+lorlZjxyYVe678dNEWmmApK3nb3k6BY5ZHmAH9v3MeO+K+ZpQBWiDtIAJA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.chess.min.js"
        integrity="sha512-ewobB6WQJVqr/+EQ4FHj9SE/CK843szKXt9i+lNT3P7Qa3A5mTBrL5qvnRvvBXLBZdLjJV0ik2jJzTqY+axgZg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.devs.min.js"
        integrity="sha512-giKIqDZv8Vsqvy/TVavPN0h0GSH+a6ahYdD1rn179qkg/AgYUiRX8vXkXBqYa21GoU1PSqdB4n/1fLQ6eMJx3g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.erd.min.js"
        integrity="sha512-yak6W7TAiBcYt+C/OYaPMdzTXR0uYbDz3d3SLWi4Abe0oeoipTEjXkJah1Uobfz3V/4zddA64PK5JojXhI5Y0A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.fsa.min.js"
        integrity="sha512-mO6I8Cv+xlOGx/P6WtGxBDJ3MNoouj3xqt1ihzdxJ+PT97BCBmlDSReLqP6W6qjn4/qnri8+3/MY74zz/uKbKQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.logic.min.js"
        integrity="sha512-7F3A8aS/aoQB4Rk7REwnbjIvvPiF/hDEPvghn3ZyoeB+ReiUoa0GsCvL+CuPPCxnaUR4Hhkvw4KPq8EbxuBJQg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.org.min.js"
        integrity="sha512-wpdYg3H16G5WCyy37eks0uMFqolvy12KmFQrgzhrFIMB1bBu94CdsG2RgfPxECXEHbqcvpUG+IacHSbNVoQyHA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.pn.min.js"
        integrity="sha512-SFeVHsrExkAbT9PCIJTLTuBCslMHjnq5zb0VHJY0XfqB0obO6YJDH3fTfmQhNPLNUa/rKooc9hbjjDwBOAHWbA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.uml.min.js"
        integrity="sha512-+lwfVlGOr0kNZsZP1PwbkeHDVM5EAfcRKDwYRrCOJI98o2M2GOO7P9QXjz2Tgcqp+RVPUAKda4F8NWXCDV6pJQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/vectorizer.min.js"
        integrity="sha512-TuNOXCEJPSS98uM22hO1eVU4yF88XrXB5k2LaLrjyNWVHY//LB/Mflx45fsBQPYwzySkGXOQlLMaAsYc6ht5YQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.min.css"
        integrity="sha512-9dgxZMRR9uQaT8xD2wWlGPJz0PEmWuSXlHEkTLl2rQD14DPlJ2khE7vL+5fOnwWcF5y24WrGLRfFiQ0dnvEBpA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.core.min.css"
        integrity="sha512-9dgxZMRR9uQaT8xD2wWlGPJz0PEmWuSXlHEkTLl2rQD14DPlJ2khE7vL+5fOnwWcF5y24WrGLRfFiQ0dnvEBpA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <style>
        html,
        body {
            height: 100%;
        }

        body {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
            margin: 0;
            overflow-y: hidden;
        }

        .router-switch {
            width: 100px;
            margin: 4px;
            background: #68ddd5;
            color: #484e68;
            outline: none;
            font-size: 12px;
            border: none;
            padding: 4px;
            border-radius: 5px;
            cursor: pointer;
        }

        .router-switch:hover {
            background: #fdc685;
            color: #fff;
        }
    </style>

    <div id="paper"></div>

    <div id="paper-container"></div>

    <script>

        var graph = new joint.dia.Graph({}, { cellNamespace: joint.shapes });

        var paper = new joint.dia.Paper({
            el: document.getElementById('paper'),
            width: 1000,
            height: 600,
            gridSize: 10,
            async: true,
            model: graph,
            cellViewNamespace: joint.shapes,
        });

        var source = new joint.shapes.standard.Rectangle({
            position: { x: 50, y: 50 },
            size: { width: 140, height: 70 },
            attrs: {
                label: {
                    text: 'Source',
                    fill: '#000000',
                    fontSize: 18,
                    fontWeight: 'lighter',
                    fontVariant: 'small-caps'
                }
            }
        });

        var target = source.clone().translate(750, 400).attr('label/text', 'Target');

        var link = new joint.shapes.standard.Link({
            source: { id: source.id },
            target: { id: target.id },
            router: { name: 'manhattan' },
            connector: { name: 'normal' },
            attrs: {
                line: {
                    stroke: '#000000',
                    strokeWidth: 3
                }
            }
        });

        var obstacle = source.clone().translate(300, 100).attr({
            label: {
                text: 'Obstacle',
                fill: '#000000'
            }
        });

        var obstacles = [
            obstacle,
            obstacle.clone().translate(200, 100),
            obstacle.clone().translate(-200, 150)
        ];

        graph.addCells(obstacles).addCells([source, target, link]);

        link.toBack();

        graph.on('change:position', function (cell) {

            // has an obstacle been moved? Then reroute the link.
            if (obstacles.indexOf(cell) > -1) {
                link.findView(paper).requestConnectionUpdate();
            }
        });

        paper.on('link:mouseenter', function (linkView) {
            var tools = new joint.dia.ToolsView({
                tools: [new joint.linkTools.Vertices()]
            });
            linkView.addTools(tools);
        });

        paper.on('link:mouseleave', function (linkView) {
            linkView.removeTools();
        });

    </script>



</body>

</html>