<!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.4.1/backbone-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.min.js"
        integrity="sha512-0kHmK8RUwEQNkd8fI7LyJP/8ZkHr1s9R/Xh2GC4fTluS7NpGuu5ed/jYvkkKzGyjVleZwKI35YvSoQL+wZ2v4g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.core.min.js"
        integrity="sha512-zCg4YtkvJ44FAVrP1M2BLN/uT7XdhdnJ+cpCmuu6RbPyCiBuLkbLkqnPcKHRsoRdCwmoP2bSm9RF2jLcke/0ZA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/geometry.min.js"
        integrity="sha512-rZ0lnakbkL/Zk0E23SDfdtQsIaG+Sma+26u0/dBp6/F2ILJ0Yzgzw924YHycyusfkZHCqDC9jXPA8eNlgk+CaA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.layout.DirectedGraph.min.js"
        integrity="sha512-qkMiS5zUMC36MY8m/JpZAXL8z6NytZ/pdazGYd1z68wnxe7temEMKPYj8/8v9xoijCDgNFXUduICmBa+Eky/Pg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.nowrap.min.js"
        integrity="sha512-VgqhEum2+MFJj/KnSOo948fGVCP+lorlZjxyYVe678dNEWmmApK3nb3k6BY5ZHmAH9v3MeO+K+ZpQBWiDtIAJA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.chess.min.js"
        integrity="sha512-ewobB6WQJVqr/+EQ4FHj9SE/CK843szKXt9i+lNT3P7Qa3A5mTBrL5qvnRvvBXLBZdLjJV0ik2jJzTqY+axgZg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.devs.min.js"
        integrity="sha512-giKIqDZv8Vsqvy/TVavPN0h0GSH+a6ahYdD1rn179qkg/AgYUiRX8vXkXBqYa21GoU1PSqdB4n/1fLQ6eMJx3g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.erd.min.js"
        integrity="sha512-yak6W7TAiBcYt+C/OYaPMdzTXR0uYbDz3d3SLWi4Abe0oeoipTEjXkJah1Uobfz3V/4zddA64PK5JojXhI5Y0A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.fsa.min.js"
        integrity="sha512-mO6I8Cv+xlOGx/P6WtGxBDJ3MNoouj3xqt1ihzdxJ+PT97BCBmlDSReLqP6W6qjn4/qnri8+3/MY74zz/uKbKQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.logic.min.js"
        integrity="sha512-7F3A8aS/aoQB4Rk7REwnbjIvvPiF/hDEPvghn3ZyoeB+ReiUoa0GsCvL+CuPPCxnaUR4Hhkvw4KPq8EbxuBJQg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.org.min.js"
        integrity="sha512-wpdYg3H16G5WCyy37eks0uMFqolvy12KmFQrgzhrFIMB1bBu94CdsG2RgfPxECXEHbqcvpUG+IacHSbNVoQyHA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.pn.min.js"
        integrity="sha512-SFeVHsrExkAbT9PCIJTLTuBCslMHjnq5zb0VHJY0XfqB0obO6YJDH3fTfmQhNPLNUa/rKooc9hbjjDwBOAHWbA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.shapes.uml.min.js"
        integrity="sha512-+lwfVlGOr0kNZsZP1PwbkeHDVM5EAfcRKDwYRrCOJI98o2M2GOO7P9QXjz2Tgcqp+RVPUAKda4F8NWXCDV6pJQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/vectorizer.min.js"
        integrity="sha512-TuNOXCEJPSS98uM22hO1eVU4yF88XrXB5k2LaLrjyNWVHY//LB/Mflx45fsBQPYwzySkGXOQlLMaAsYc6ht5YQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.min.css"
        integrity="sha512-9dgxZMRR9uQaT8xD2wWlGPJz0PEmWuSXlHEkTLl2rQD14DPlJ2khE7vL+5fOnwWcF5y24WrGLRfFiQ0dnvEBpA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.7.7/joint.core.min.css"
        integrity="sha512-9dgxZMRR9uQaT8xD2wWlGPJz0PEmWuSXlHEkTLl2rQD14DPlJ2khE7vL+5fOnwWcF5y24WrGLRfFiQ0dnvEBpA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <style>
        html,
        body {
            height: 100%;
        }

        body {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
            margin: 0;
            overflow-y: hidden;
        }

        .router-switch {
            width: 100px;
            margin: 4px;
            background: #68ddd5;
            color: #484e68;
            outline: none;
            font-size: 12px;
            border: none;
            padding: 4px;
            border-radius: 5px;
            cursor: pointer;
        }

        .router-switch:hover {
            background: #fdc685;
            color: #fff;
        }
    </style>

    <div id="paper"></div>

    <div id="paper-container"></div>

    <script>
        const data = {
            id: 6190,
            label: "061945",
            children: [
                {
                    id: 6198,
                    label: "009024",
                    children: [
                        {
                            id: 6204,
                            label: "027874",
                            children: [
                                {
                                    id: 33123,
                                    lable: "grand grand grand kid",
                                    children: []
                                }
                            ]
                        },
                        {
                            id: 6203,
                            label: "078404",
                            children: []
                        },

                    ]
                },
                {
                    id: 6233,
                    label: "2",
                    children: [
                        {
                            id: 620311,
                            label: "grand kid 1",
                            children: []
                        },
                        {
                            id: 620311,
                            label: "grand kid 2",
                            children: []
                        },
                        {
                            id: 620311,
                            label: "grand kid 3",
                            children: []
                        },
                    ]
                },
                {
                    id: 6333,
                    label: "3",
                    children: [
                        {
                            id: 3333,
                            label: "some label",
                            children: []
                        },

                        {
                            id: 33989,
                            label: "yengi bola",
                            children: [

                                {
                                    id: 39030,
                                    label: "yengi bola 3",
                                    children: []
                                },
                            ]
                        },

                        {
                            id: 33989,
                            label: "yengi bola 2",
                            children: [
                                { id: 333111, label: "doddmd", children: [] }

                            ]
                        }
                    ]
                },
            ]
        }
        var graph = new joint.dia.Graph({}, { cellNamespace: joint.shapes });
        var paper = new joint.dia.Paper({
            el: document.getElementById('paper'),
            width: 1000,
            height: 600,
            gridSize: 10,
            async: true,
            model: graph,
            cellViewNamespace: joint.shapes,
        });

        function addCellsRecursive(parentCell, data) {
            var cell = new joint.shapes.standard.Rectangle({
                position: { x: 0, y: 0 }, // Position based on depth and x
                size: { width: 100, height: 50 },
                attrs: { rect: { fill: 'blue' }, text: { text: data.label, fill: 'white' } }
            });
            graph.addCell(cell);
            if (parentCell) {
                var link = new joint.shapes.standard.Link({
                    source: { id: parentCell.id },
                    target: { id: cell.id },
                    router: { name: 'orthogonal' },
                    connector: { name: 'normal' },
                    attrs: { line: { stroke: 'black' } }
                });
                graph.addCell(link);
            }
            if (data.children && data.children.length > 0) {
                data.children.forEach(function (child) {
                    addCellsRecursive(cell, child);
                });
            }
        }
        addCellsRecursive(null, data);

        graph.on('change:position', function (cell) {
            graph.getLinks().forEach(link => {
                link.findView(paper).requestConnectionUpdate();
            })
        })
    </script>



</body>

</html>